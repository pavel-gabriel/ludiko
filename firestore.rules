rules_version = '2';

// Firestore rules for Ludiko — Phase 1b
service cloud.firestore {
  match /databases/{database}/documents {
    // Default: deny all reads and writes
    match /{document=**} {
      allow read, write: if false;
    }

    // Game history: any authenticated user can create entries and read all history
    // (anonymous auth counts — kids are signed in anonymously before RTDB writes)
    match /gameHistory/{docId} {
      allow read: if request.auth != null;
      allow create: if request.auth != null;
      // No update or delete — history is immutable
    }

    // Phase 1c will add:
    // - /templates/{id}: teachers can CRUD their own templates
    // - /adminStats/{id}: only admin UID can read
  }
}
